<!DOCTYPE html>
<html>
<head>
    <title>AI Smart Fashion Aggregator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f4f4f4;
        }

        header {
            background: black;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 22px;
        }

        .container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 20px;
        }

        .search-box {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-box input {
            padding: 12px;
            width: 280px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .search-box button {
            padding: 12px 20px;
            background: black;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

        .search-box button:hover {
            background: #444;
        }

        .loading {
            text-align: center;
            font-size: 18px;
            display: none;
            margin-bottom: 20px;
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 5px;
        }

        .price {
            font-weight: bold;
            margin: 10px 0;
        }

        .buy-btn {
            display: inline-block;
            padding: 10px 15px;
            background: #ff9900;
            color: black;
            text-decoration: none;
            border-radius: 5px;
            transition: 0.3s;
        }

        .buy-btn:hover {
            background: #e68a00;
        }

        footer {
            text-align: center;
            margin-top: 60px;
            padding: 20px;
            font-size: 12px;
            color: gray;
        }
        .category-section {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.category-card {
    background: white;
    padding: 20px 30px;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-weight: bold;
}

.category-card:hover {
    transform: translateY(-5px);
    background: black;
    color: white;
}
        .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(8px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background: white;
    padding: 30px;
    border-radius: 15px;
    width: 80%;
    max-height: 80vh;
    overflow-y: auto;
}

.modal-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
}

.close-btn {
    float: right;
    background: red;
    color: white;
    border: none;
    padding: 5px 10px;
    cursor: pointer;
    border-radius: 5px;
}
    </style>
</head>

<body>

<header>
    AI Smart Fashion Aggregator
</header>

<div class="container">

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search fashion products...">
        <button onclick="searchProducts()">Search</button>
    </div>
    <div class="category-section">

  <div class="category-card" onclick="openCategory('Shirt')">ðŸ‘• Shirts</div>
  <div class="category-card" onclick="openCategory('Pant')">ðŸ‘– Pants</div>
  <div class="category-card" onclick="openCategory('Shoes')">ðŸ‘Ÿ Shoes</div>
  <div class="category-card" onclick="openCategory('Jacket')">ðŸ§¥ Jackets</div>

</div>
    <h2>Your Wardrobe</h2>

        <div style="text-align:center; margin-bottom:20px;">
            <input type="file" id="wardrobeInput" accept="image/*" multiple>
        </div>

<div id="wardrobeGallery" style="
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap:15px;
    margin-bottom:30px;
"></div>

<div id="wardrobeCount" style="text-align:center; font-weight:bold; margin-bottom:30px;">
    Total Items: 0
</div>
    <div class="loading" id="loading">
        Loading products...
    </div>

    <div class="products" id="productContainer"></div>

</div>

<footer>
    Disclaimer: This website contains affiliate links.
</footer>

<script>

let allProducts = [];

const input = document.getElementById("searchInput");
const container = document.getElementById("productContainer");

// Create suggestion box
const suggestionBox = document.createElement("div");
suggestionBox.style.position = "absolute";
suggestionBox.style.background = "white";
suggestionBox.style.width = "260px";
suggestionBox.style.border = "1px solid #ccc";
suggestionBox.style.display = "none";
suggestionBox.style.zIndex = "1000";
input.parentNode.appendChild(suggestionBox);


// Fetch products from JSON once
async function loadProducts() {
    const response = await fetch("products.json");
    allProducts = await response.json();
    displayProducts(allProducts);
}

function displayProducts(products) {
    container.innerHTML = "";

    if (products.length === 0) {
        container.innerHTML = "<div class='no-results'>No products found.</div>";
        return;
    }

    products.forEach(product => {
        container.innerHTML += `
            <div class="card">
                <img src="${product.image}" alt="${product.title}">
                <h3>${product.title}</h3>
                <div class="rating">${product.rating}</div>
                <div class="price">${product.price}</div>
                <a href="${product.link}" target="_blank" class="buy-btn">
                    Buy on Amazon
                </a>
            </div>
        `;
    });
}


// Search button
function searchProducts() {
    const value = input.value.toLowerCase();
    const filtered = allProducts.filter(p =>
        p.title.toLowerCase().includes(value)
    );
    displayProducts(filtered);
}


// Live suggestions
input.addEventListener("input", function () {
    const value = input.value.toLowerCase();
    suggestionBox.innerHTML = "";

    if (value === "") {
        suggestionBox.style.display = "none";
        return;
    }

    const matches = allProducts.filter(p =>
        p.title.toLowerCase().includes(value)
    );

    if (matches.length === 0) {
        suggestionBox.style.display = "none";
        return;
    }

    matches.forEach(product => {
        const div = document.createElement("div");
        div.textContent = product.title;
        div.style.padding = "8px";
        div.style.cursor = "pointer";

        div.onclick = function () {
            input.value = product.title;
            suggestionBox.style.display = "none";
            displayProducts([product]);
        };

        div.onmouseover = () => div.style.background = "#f0f0f0";
        div.onmouseout = () => div.style.background = "white";

        suggestionBox.appendChild(div);
    });

    suggestionBox.style.display = "block";
});


// Enter key support
input.addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        searchProducts();
    }
});

loadProducts();
    let wardrobeItems = [];

const wardrobeInput = document.getElementById("wardrobeInput");
const wardrobeGallery = document.getElementById("wardrobeGallery");
const wardrobeCount = document.getElementById("wardrobeCount");

wardrobeInput.addEventListener("change", function(event) {
    const files = event.target.files;

    if (!files.length) return;

    for (let i = 0; i < files.length; i++) {
        const file = files[i];

        const reader = new FileReader();

        reader.onload = function(e) {
            const imageUrl = e.target.result;
            wardrobeItems.push(imageUrl);
            renderWardrobe();
        };

        reader.readAsDataURL(file);
    }
});

function renderWardrobe() {
    wardrobeGallery.innerHTML = "";

    wardrobeItems.forEach((img, index) => {
        wardrobeGallery.innerHTML += `
            <div style="
                background:white;
                padding:10px;
                border-radius:8px;
                box-shadow:0 4px 10px rgba(0,0,0,0.1);
                text-align:center;
            ">
                <img src="${img}" style="
                    width:100%;
                    height:150px;
                    object-fit:cover;
                    border-radius:5px;
                ">
                <button onclick="removeWardrobe(${index})"
                    style="
                        margin-top:8px;
                        padding:5px 10px;
                        background:red;
                        color:white;
                        border:none;
                        border-radius:4px;
                        cursor:pointer;
                    ">
                    Remove
                </button>
            </div>
        `;
    });

    wardrobeCount.innerText = "Total Items: " + wardrobeItems.length;
}

function removeWardrobe(index) {
    wardrobeItems.splice(index, 1);
    renderWardrobe();
}
function openCategory(category) {
    const overlay = document.getElementById("overlay");
    const modalItems = document.getElementById("modalItems");

    const filtered = wardrobeItems.filter(item => item.category === category);

    modalItems.innerHTML = "";

    filtered.forEach(item => {
        modalItems.innerHTML += `
            <div>
                <img src="${item.image}" style="
                    width:100%;
                    height:150px;
                    object-fit:cover;
                    border-radius:8px;
                ">
            </div>
        `;
    });

    overlay.style.display = "flex";
}

function closeCategory() {
    document.getElementById("overlay").style.display = "none";
}
</script>
<div id="overlay" class="overlay">
    <div class="modal-content">
        <button class="close-btn" onclick="closeCategory()">âœ–</button>
        <div id="modalItems" class="modal-grid"></div>
    </div>
</div>
</body>
</html>
